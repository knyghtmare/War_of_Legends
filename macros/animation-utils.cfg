#textdomain wesnoth-War_of_Legends

#define SOUND_LIST:THORNS
magic-thorns-1.ogg,magic-thorns-2.ogg
#enddef

#define SOUND_LIST:THORNS_MISS
magic-thorns-miss-1.ogg,magic-thorns-miss-2.ogg
#enddef

#define SOUND_LIST:IMP_HIT
{SOUND_LIST:OGRE_HIT}#enddef

#define SOUND_LIST:IMP_DIE
{SOUND_LIST:OGRE_DIE}#enddef

#define MISSILE_FRAME_GAZE
    [missile_frame]
        offset=1.0
        begin=-200
        end=0
        image="projectiles/gaze.png"
        image_diagonal="projectiles/gaze.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_DARKNESS_BEAM
    # Animate a beam of darkness coming down from the... heavens. :P
    [if]
        direction=n,ne,nw
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-1.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-2.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-3.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-4.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-5.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-6.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=130
            halo="halo/darkness-beam-7.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-6.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-5.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-4.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-3.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-2.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-1.png"
            offset=1.0
        [/missile_frame]
    [/if]
    [else]
        direction=s,se,sw
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-1.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-2.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-3.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-4.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-5.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=30
            halo="halo/darkness-beam-6.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=130
            halo="halo/darkness-beam-7.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-6.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-5.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-4.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-3.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-2.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=70
            halo="halo/darkness-beam-1.png~FL(vert)"
            offset=1.0
        [/missile_frame]
    [/else]
#enddef

#define MISSILE_FRAME_PLASMA_BOMB
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/plasmatorpedo-n.png"
        image_diagonal="projectiles/plasmatorpedo-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_ETHEREAL_BLAST
    [missile_frame]
        begin=-50
        end=150
        image="projectiles/chaosmissile-n.png"
        image_diagonal="projectiles/chaosmissile-ne.png"
        halo=halo/chaos-halo1.png:25,halo/chaos-halo2.png:25,halo/chaos-halo3.png:25,halo/chaos-halo4.png:25,halo/chaos-halo5.png:25,halo/chaos-halo6.png:25,halo/chaos-halo7.png:25,halo/chaos-halo8.png:25,halo/chaos-halo9.png:50
        halo_x,halo_y=10,-2
    [/missile_frame]
#enddef

#define MISSILE_FRAME_ENERGY_SHOCK
    [missile_frame]
        begin=-200
        end=50
        image="projectiles/energybeam-n.png"
        image_diagonal="projectiles/energybeam-ne.png"
        halo=halo/chaos-halo1.png:25,halo/chaos-halo2.png:25,halo/chaos-halo3.png:25,halo/chaos-halo4.png:25,halo/chaos-halo5.png:25,halo/chaos-halo6.png:25,halo/chaos-halo7.png:25,halo/chaos-halo8.png:25,halo/chaos-halo9.png:50
        halo_x,halo_y=10,-2
    [/missile_frame]
#enddef

#define MISSILE_FRAME_BOLAS
    [missile_frame]
        begin=-150
        end=0
        image=projectiles/bolas-n.png
        image_diagonal=projectiles/bolas-ne.png
    [/missile_frame]
#enddef

#define MISSILE_FRAME_SLIME
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/slime-glob.png"
        image_diagonal="projectiles/slime-glob.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_INFERNAL_CHILL
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/whitemissile-n.png"
        image_diagonal="projectiles/whitemissile-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_FAERIE_MYSTIC_FIRE
    specialfx_start_time=-330
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-1.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-2.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-3.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-4.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-5.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-6.png
    [/specialfx_frame]
    [specialfx_frame]
        duration=50
        halo=halo/saurian-magic-halo-7.png
    [/specialfx_frame]
    {MISSILE_FRAME_FIRE_BREATH 12,-39 12,19 25,-26 27,19}
    [if]
        hits=yes
        [burst_frame]
            begin=0
            end=75
            image="projectiles/fire-burst-small-1.png"
            image_diagonal="projectiles/fire-burst-small-1.png"
            offset=0.8
        [/burst_frame]
        [burst_frame]
            begin=75
            end=150
            image="projectiles/fire-burst-small-2.png"
            image_diagonal="projectiles/fire-burst-small-2.png"
            offset=0.83
        [/burst_frame]
        [burst_frame]
            begin=150
            end=225
            image="projectiles/fire-burst-small-3.png"
            image_diagonal="projectiles/fire-burst-small-3.png"
            offset=0.86
        [/burst_frame]
        [burst_frame]
            begin=225
            end=300
            image="projectiles/fire-burst-small-4.png"
            image_diagonal="projectiles/fire-burst-small-4.png"
            offset=0.89
        [/burst_frame]
        [burst_frame]
            begin=300
            end=375
            image="projectiles/fire-burst-small-5.png"
            image_diagonal="projectiles/fire-burst-small-5.png"
            offset=0.92
        [/burst_frame]
        [burst_frame]
            begin=375
            end=450
            image="projectiles/fire-burst-small-6.png"
            image_diagonal="projectiles/fire-burst-small-6.png"
            offset=0.95
        [/burst_frame]
        [burst_frame]
            begin=450
            end=525
            image="projectiles/fire-burst-small-7.png"
            image_diagonal="projectiles/fire-burst-small-7.png"
            offset=0.98
        [/burst_frame]
        [burst_frame]
            begin=525
            end=600
            image="projectiles/fire-burst-small-8.png"
            image_diagonal="projectiles/fire-burst-small-8.png"
            offset=1.0
        [/burst_frame]
    [/if]
    [else]
        hits=no
        [burst_frame]
            begin=0
            end=75
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.8
        [/burst_frame]
        [burst_frame]
            begin=75
            end=150
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.83
        [/burst_frame]
        [burst_frame]
            begin=150
            end=225
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.86
        [/burst_frame]
        [burst_frame]
            begin=225
            end=300
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.89
        [/burst_frame]
        [burst_frame]
            begin=300
            end=375
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.92
        [/burst_frame]
        [burst_frame]
            begin=375
            end=450
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.95
        [/burst_frame]
        [burst_frame]
            begin=450
            end=525
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=0.98
        [/burst_frame]
        [burst_frame]
            begin=525
            end=600
            image="misc/blank-hex.png"
            image_diagonal="misc/blank-hex.png"
            offset=1.0
        [/burst_frame]
    [/else]
#enddef

#define MELEE_FRAME_FIRE_AURA _MELEE_FRAME _BASE_FRAME
    start_time=-150
    [if]
        hits=no
        [frame]
            duration=50
            image={_BASE_FRAME}
        [/frame]
        [frame]
            duration=100
            image={_MELEE_FRAME}
            sound={SOUND_LIST:MISS}
        [/frame]
        [frame]
            duration=100
            image={_MELEE_FRAME}
        [/frame]
        [frame]
            duration=200
            image={_BASE_FRAME}
        [/frame]
    [/if]
    [else]
        hits=yes
        [frame]
            duration=50
            halo=projectiles/fire-burst-small-1.png
            image={_BASE_FRAME}
            sound=fire.wav
        [/frame]
        [frame]
            duration=50
            halo=projectiles/fire-burst-small-1.png
            image={_MELEE_FRAME}
        [/frame]
        [frame]
            duration=50
            image={_MELEE_FRAME}
            halo=projectiles/fire-burst-small-2.png
        [/frame]
        [frame]
            duration=50
            image={_MELEE_FRAME}
            halo=projectiles/fire-burst-small-3.png
        [/frame]
        [frame]
            duration=50
            image={_MELEE_FRAME}
            halo=projectiles/fire-burst-small-4.png
        [/frame]
        [frame]
            duration=50
            image={_BASE_FRAME}
            halo=projectiles/fire-burst-small-5.png
        [/frame]
        [frame]
            duration=50
            image={_BASE_FRAME}
            halo=projectiles/fire-burst-small-6.png
        [/frame]
        [frame]
            duration=50
            image={_BASE_FRAME}
            halo=projectiles/fire-burst-small-7.png
        [/frame]
        [frame]
            duration=50
            image={_BASE_FRAME}
            halo=projectiles/fire-burst-small-8.png
        [/frame]
    [/else]
#enddef

# _RIMG : reaction frame image
# _BIMG : base frame image
# _RSND : hit sound/soundlist
#define FLYING_DEFENSE_ANIM _RIMG _BIMG _RSND
    [defend]
        [if]
            hits=miss
            offset=0.0~-0.15,-0.15~0.0
        [/if]
        start_time=-126
        [frame]
            duration=1
            image={_BIMG}
        [/frame]
        [frame]
            duration=100
            image={_RIMG}
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=150
                image={_RIMG}
                sound={_RSND}
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=150
                image={_RIMG}
            [/frame]
        [/else]
        [frame]
            duration=1
            image={_BIMG}
        [/frame]
    [/defend]
#enddef

#define MISSILE_FRAME_AURA_BLAST_PURE
    [missile_frame]
        begin=-200
        end=0
        halo=halo/aura-pure-halo1.png,halo/aura-pure-halo2.png,halo/aura-pure-halo3.png,halo/aura-pure-halo4.png,halo/aura-pure-halo5.png
        halo_x,halo_y=11,-21
    [/missile_frame]
#enddef

#define MISSILE_FRAME_AURA_BLAST_PURE_BIG
    [missile_frame]
        begin=-200
        end=80
        halo=halo/aura-pure-halo1.png,halo/aura-pure-halo2-big.png,halo/aura-pure-halo3-big.png,halo/aura-pure-halo4-big.png,halo/aura-pure-halo5-big.png,halo/aura-pure-halo6-big.png
        halo_x,halo_y=13,-22
    [/missile_frame]
#enddef

#define MISSILE_FRAME_BLOOD_BOIL
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/fiery-auramissile-n.png"
        image_diagonal="projectiles/fiery-auramissile-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_AURA_WAVE
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/auramissile-n.png"
        image_diagonal="projectiles/auramissile-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_LIGHTNING
    [missile_frame]
        begin=-200
        end=0
        image="projectiles/lightning-n.png"
        image_diagonal="projectiles/lightning-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_WEB
    [missile_frame]
        begin=-200
        end=0
        image="projectiles/web.png"
        image_diagonal="projectiles/web.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_NOCTUM
    [missile_frame]
        begin=-200
        end=100
        image="projectiles/noctum-n.png"
        image_diagonal="projectiles/noctum-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_THROWING_KNIFE
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/dagger-n.png"
        image_diagonal="projectiles/dagger-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_JAVELIN
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/spear-n.png"
        image_diagonal="projectiles/spear-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_ARROW
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/missile-n.png"
        image_diagonal="projectiles/missile-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_FIERY_ARROW_HIT
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/missile-fire-n.png"
        image_diagonal="projectiles/missile-fire-ne.png"
        offset=0~0.8
    [/missile_frame]
#enddef

#define MISSILE_FRAME_FIERY_ARROW_MISS
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/missile-fire-n.png"
        image_diagonal="projectiles/missile-fire-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_THORNS
    [missile_frame]
        begin=-200
        end=0
        image="projectiles/thorns.png"
        image_diagonal="projectiles/thorns-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_VINES
    [missile_frame]
        offset=1.0
        begin=-200
        end=0
        image="projectiles/entangle.png"
        image_diagonal="projectiles/entangle.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_TORNADO
    [missile_frame]
        begin=-200
        end=0
        image="projectiles/tornado.png"
        image_diagonal="projectiles/tornado.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_RAVAGE
    [if]
        direction=sw,s,se
        [missile_frame]
            offset=1.0
            begin=-200
            end=120
            halo="projectiles/ravage-1.png:40,projectiles/ravage-2.png:40,projectiles/ravage-3.png:40,projectiles/ravage-4.png:40,projectiles/ravage-5.png:40,projectiles/ravage-6.png:40,projectiles/ravage-7.png:40,projectiles/ravage-8.png:40"
        [/missile_frame]
    [/if]
    [else]
        direction=ne,n,nw
        [missile_frame]
            offset=1.0
            begin=-200
            end=120
            halo="projectiles/ravage-1.png~FL(vert):40,projectiles/ravage-2.png~FL(vert):40,projectiles/ravage-3.png~FL(vert):40,projectiles/ravage-4.png~FL(vert):40,projectiles/ravage-5.png~FL(vert):40,projectiles/ravage-6.png~FL(vert):40,projectiles/ravage-7.png~FL(vert):40,projectiles/ravage-8.png~FL(vert):40"
        [/missile_frame]
    [/else]
#enddef

#define MISSILE_FRAME_ICICLE
    [missile_frame]
        begin=-150
        end=0
        image="projectiles/icicle-n.png"
        image_diagonal="projectiles/icicle-ne.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_WATER_SPRAY
    [missile_frame]
        begin=-165
        end=0
        image="projectiles/water-spray.png"
        image_diagonal="projectiles/water-spray.png"
    [/missile_frame]
#enddef

#define MISSILE_FRAME_NATURE_FLARE
    missile_start_time=-350
    [if]
        direction=n,ne,nw
        hits=yes
        [missile_frame]
            duration=40
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.0~0.10
        [/missile_frame]
        [missile_frame]
            duration=100
            image="projectiles/natureflare-n-2.png"
            image_diagonal="projectiles/natureflare-nw-2.png"
            offset=0.1~0.30
        [/missile_frame]
        [missile_frame]
            duration=125
            image="projectiles/natureflare-n.png"
            image_diagonal="projectiles/natureflare-nw.png"
            offset=0.3~0.60
        [/missile_frame]
        [missile_frame]
            duration=55
            image="projectiles/natureflare-n-2.png"
            image_diagonal="projectiles/natureflare-nw-2.png"
            offset=0.7~0.8
        [/missile_frame]
        [missile_frame]
            duration=30
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.8~0.9
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-1.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-2.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-3.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-4.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-5.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-6.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-7.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-8.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-9.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-10.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-11.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-12.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-13.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-14.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-15.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-16.png"
            offset=1.0
        [/missile_frame]
    [/if]
    [else]
        direction=s,se,sw
        hits=yes
        [missile_frame]
            duration=40
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.0~0.10
        [/missile_frame]
        [missile_frame]
            duration=100
            image="projectiles/natureflare-n-2.png"
            image_diagonal="projectiles/natureflare-nw-2.png"
            offset=0.1~0.30
        [/missile_frame]
        [missile_frame]
            duration=125
            image="projectiles/natureflare-n.png"
            image_diagonal="projectiles/natureflare-nw.png"
            offset=0.3~0.60
        [/missile_frame]
        [missile_frame]
            duration=55
            image="projectiles/natureflare-n-2.png"
            image_diagonal="projectiles/natureflare-nw-2.png"
            offset=0.7~0.8
        [/missile_frame]
        [missile_frame]
            duration=30
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.8~0.9
        [/missile_frame]

        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-1.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-2.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-3.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-4.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-5.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-6.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-7.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-8.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-9.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-10.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-11.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-12.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-13.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-14.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-15.png~FL(vert)"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            duration=60
            halo="projectiles/natureflare-impact-16.png~FL(vert)"
            offset=1.0
        [/missile_frame]
    [/else]
    [else]
        direction=n,ne,nw
        hits=no
        [missile_frame]
            duration=40
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.0~0.1
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-3.png"
            offset=0.1~0.3
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-4.png"
            offset=0.3~0.4
            alpha=1.0~0.8
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-5.png"
            offset=0.4~0.45
            alpha=0.8~0.6
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-6.png"
            offset=0.45~0.5
            alpha=0.6~0.4
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-7.png"
            offset=0.5
            alpha=0.4~0.2
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-8.png"
            offset=0.5
            alpha=0.2~0.0
        [/missile_frame]
    [/else]
    [else]
        direction=s,se,sw
        hits=no
        [missile_frame]
            duration=40
            image="projectiles/natureflare-n-1.png"
            image_diagonal="projectiles/natureflare-nw-1.png"
            offset=0.0~0.1
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-3.png~FL(vert)"
            offset=0.1~0.3
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-4.png~FL(vert)"
            offset=0.3~0.4
            alpha=1.0~0.8
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-5.png~FL(vert)"
            offset=0.4~0.45
            alpha=0.8~0.6
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-6.png~FL(vert)"
            offset=0.45~0.5
            alpha=0.6~0.4
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-7.png~FL(vert)"
            offset=0.5
            alpha=0.4~0.2
        [/missile_frame]
        [missile_frame]
            duration=40
            halo="projectiles/natureflare-impact-8.png~FL(vert)"
            offset=0.5
            alpha=0.2~0.0
        [/missile_frame]
    [/else]
#enddef

#define MISSILE_FRAME_TERRA_ORBIS
    [if]
        hits=yes
        [missile_frame]
            begin=-200
            end=0
            image="projectiles/terraorbis.png"
            image_diagonal="projectiles/terraorbis.png"
            offset=0.0~0.8
        [/missile_frame]
        [missile_frame]
            begin=0
            end=50
            halo="projectiles/terraorbis-impact-1.png"
            offset=0.8
            sound=thunderstick.ogg
        [/missile_frame]
        [missile_frame]
            begin=50
            end=100
            halo="projectiles/terraorbis-impact-2.png"
            offset=0.92
        [/missile_frame]
        [missile_frame]
            begin=100
            end=150
            halo="projectiles/terraorbis-impact-3.png"
            offset=0.94
        [/missile_frame]
        [missile_frame]
            begin=150
            end=200
            halo="projectiles/terraorbis-impact-4.png"
            offset=0.96
        [/missile_frame]
        [missile_frame]
            begin=200
            end=250
            halo="projectiles/terraorbis-impact-5.png"
            offset=0.98
        [/missile_frame]
        [missile_frame]
            begin=250
            end=300
            halo="projectiles/terraorbis-impact-6.png"
            offset=1.0
        [/missile_frame]
        [missile_frame]
            begin=300
            end=350
            halo="projectiles/terraorbis-impact-7.png"
            offset=1.02
        [/missile_frame]
    [/if]
    [else]
        hits=no
        [missile_frame]
            begin=-200
            end=0
            image="projectiles/terraorbis.png"
            image_diagonal="projectiles/terraorbis.png"
            offset=0.0~0.8
            alpha=.8~0.0:200
        [/missile_frame]
    [/else]
#enddef

#define MISSILE_FRAME_SACRED_FIRE
    {SACRED_FIRE_PROJECTILES}
    [halo_frame]
        begin=-400
        end=-220
        halo=halo/sacred-fire-beam-1.png:30,halo/sacred-fire-beam-2.png:30,halo/sacred-fire-beam-3.png:30,halo/sacred-fire-beam-4.png:30,halo/sacred-fire-beam-5.png:30,halo/sacred-fire-beam-6.png:30
    [/halo_frame]
    [if]
        hits=yes
        [halo_frame]
            begin=-220
            end=-40
            halo=halo/sacred-fire-beam-7.png:30,halo/sacred-fire-beam-5.png:30,halo/sacred-fire-beam-4.png:30,halo/sacred-fire-beam-3.png:30,halo/sacred-fire-beam-2.png:30,halo/sacred-fire-beam-1.png:30
            sound=magic-faeriefire.ogg
        [/halo_frame]
        {SACRED_FIRE_BURST}
    [/if]
    [else]
        hits=no
        [halo_frame]
            begin=-220
            end=-40
            halo=halo/sacred-fire-beam-7.png:30,halo/sacred-fire-beam-5.png:30,halo/sacred-fire-beam-4.png:30,halo/sacred-fire-beam-3.png:30,halo/sacred-fire-beam-2.png:30,halo/sacred-fire-beam-1.png:30
            sound=magic-faeriefire-miss.ogg
        [/halo_frame]
    [/else]
    [halo_frame]
        begin=-40
        end=100
    [/halo_frame]
#enddef

#define SACRED_FIRE_PROJECTILES
    #The fiery projectiles for sacred fire
    [missile_frame]
        begin=-500
        end=-350
        image="projectiles/sacred-fire-n-1.png"
        image_diagonal="projectiles/sacred-fire-ne-1.png"
        halo=halo/sacred-fire1.png:30,halo/sacred-fire2.png:30,halo/sacred-fire3.png:25
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=-350
        end=-200
        image="projectiles/sacred-fire-n-2.png"
        image_diagonal="projectiles/sacred-fire-ne-2.png"
        halo=halo/sacred-fire3.png:75,halo/sacred-fire4.png:75
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=-200
        end=-50
        image="projectiles/sacred-fire-n-3.png"
        image_diagonal="projectiles/sacred-fire-ne-3.png"
        halo=halo/sacred-fire5.png:30,halo/sacred-fire1.png:30,halo/sacred-fire2.png:50
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=-50
        end=0
        image="projectiles/sacred-fire-n-4.png"
        image_diagonal="projectiles/sacred-fire-ne-4.png"
        halo=halo/sacred-fire6.png
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=25
        end=75
        image="projectiles/sacred-fire-n-5.png"
        image_diagonal="projectiles/sacred-fire-ne-5.png"
        halo=halo/sacred-fire7.png
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=75
        end=125
        image="projectiles/sacred-fire-n-6.png"
        image_diagonal="projectiles/sacred-fire-ne-6.png"
        halo=halo/sacred-fire8.png
        halos_x,halos_y=0,0
    [/missile_frame]
    [missile_frame]
        begin=125
        end=175
        image="projectiles/sacred-fire-n-7.png"
        image_diagonal="projectiles/sacred-fire-ne-7.png"
        halo=halo/sacred-fire9.png
        halos_x,halos_y=0,0
    [/missile_frame]
#enddef

#define SACRED_FIRE_BURST
    [missile_frame]
        begin=0
        end=75
        image="projectiles/sacred-fire-burst-1.png"
        image_diagonal="projectiles/sacred-fire-burst-1.png"
        offset=0.8
    [/missile_frame]
    [missile_frame]
        begin=75
        end=150
        image="projectiles/sacred-fire-burst-2.png"
        image_diagonal="projectiles/sacred-fire-burst-2.png"
        offset=0.83
    [/missile_frame]
    [missile_frame]
        begin=150
        end=225
        image="projectiles/sacred-fire-burst-3.png"
        image_diagonal="projectiles/sacred-fire-burst-3.png"
        offset=0.86
    [/missile_frame]
    [missile_frame]
        begin=225
        end=300
        image="projectiles/sacred-fire-burst-4.png"
        image_diagonal="projectiles/sacred-fire-burst-4.png"
        offset=0.89
    [/missile_frame]
    [missile_frame]
        begin=300
        end=375
        image="projectiles/sacred-fire-burst-5.png"
        image_diagonal="projectiles/sacred-fire-burst-5.png"
        offset=0.92
    [/missile_frame]
    [missile_frame]
        begin=375
        end=450
        image="projectiles/sacred-fire-burst-6.png"
        image_diagonal="projectiles/sacred-fire-burst-6.png"
        offset=0.95
    [/missile_frame]
    [missile_frame]
        begin=450
        end=525
        image="projectiles/sacred-fire-burst-7.png"
        image_diagonal="projectiles/sacred-fire-burst-7.png"
        offset=0.98
    [/missile_frame]
    [missile_frame]
        begin=525
        end=600
        image="projectiles/sacred-fire-burst-8.png"
        image_diagonal="projectiles/sacred-fire-burst-8.png"
        offset=1.0
    [/missile_frame]
#enddef

#define HEAL_FRAME_MINOTAUR FRAME1 FRAME2
    [healing_anim]
        start_time=-300
        [frame]
            duration=50
            image={FRAME1}
            halo=halo/saurian-magic-halo-1.png
        [/frame]
        [frame]
            duration=60
            image={FRAME1}
            halo=halo/saurian-magic-halo-2.png
        [/frame]
        [frame]
            duration=70
            image={FRAME1}
            halo=halo/saurian-magic-halo-3.png
        [/frame]
        [frame]
            duration=80
            image={FRAME1}
            halo=halo/saurian-magic-halo-4.png
        [/frame]
        [frame]
            duration=90
            image={FRAME1}
            halo=halo/saurian-magic-halo-5.png
        [/frame]
        [frame]
            duration=100
            image={FRAME2}
            halo=halo/saurian-magic-halo-6.png
        [/frame]
        [frame]
            duration=100
            image={FRAME2}
            halo=halo/saurian-magic-halo-7.png
        [/frame]
    [/healing_anim]
#enddef

##### HALO ANIMATIONS #####

#define AURA_HALO
    [halo_frame]
        begin=-300
        end=-250
        halo=halo/aura-halo-1.png
    [/halo_frame]
    [halo_frame]
        begin=-250
        end=-190
        halo=halo/aura-halo-2.png
    [/halo_frame]
    [halo_frame]
        begin=-190
        end=-120
        halo=halo/aura-halo-3.png
    [/halo_frame]
    [halo_frame]
        begin=-120
        end=-40
        halo=halo/aura-halo-4.png
    [/halo_frame]
    [halo_frame]
        begin=-40
        end=50
        halo=halo/aura-halo-5.png
    [/halo_frame]
    [halo_frame]
        begin=50
        end=150
        halo=halo/aura-halo-6.png
    [/halo_frame]
    [halo_frame]
        begin=150
        end=250
        halo=halo/aura-halo-7.png
    [/halo_frame]
#enddef

##### HALF-ANIMATED ANIMATIONS #####

#define HALF-ANIMATED_BOW_ANIMATION FRAME
    [attack_anim]
        [filter_attack]
            name=bow
        [/filter_attack]
        {MISSILE_FRAME_ARROW}
        [if]
            hits=yes
            [frame]
                begin=-375
                end=-300
                image={FRAME}
                sound=bow.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-375
                end=-300
                image={FRAME}
                sound=bow-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-300
            end=20
            image={FRAME}
        [/frame]
    [/attack_anim]
#enddef

#### MISCELLANEOUS ANIMATIONS ####

#define BAT_TRANSFORM_FRAME IMAGE_NAME BLEND_COLOR BLEND_RATIO MODIFIER
    [frame]
        duration=100
        image=units/undead/{IMAGE_NAME}.png
        blend_color={BLEND_COLOR}
        blend_ratio={BLEND_RATIO}
        {MODIFIER}
    [/frame]
#enddef

#define VAMPIRE_TRANSFORM_FRAME IMAGE_NAME BLEND_COLOR BLEND_RATIO MODIFIER
    [frame]
        duration=100
        image=units/vampires/{IMAGE_NAME}.png
        blend_color={BLEND_COLOR}
        blend_ratio={BLEND_RATIO}
        {MODIFIER}
    [/frame]
#enddef

# _RIMG : reaction frame image
# _BIMG : base frame image
# _RSND : hit sound/soundlist
#define FLYING_DEFENSE_ANIM _RIMG _BIMG _RSND
    [defend]
        [if]
            hits=miss
            offset=0.0~-0.15,-0.15~0.0
        [/if]
        start_time=-126
        [frame]
            duration=1
            image={_BIMG}
        [/frame]
        [frame]
            duration=100
            image={_RIMG}
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=150
                image={_RIMG}
                sound={_RSND}
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=150
                image={_RIMG}
            [/frame]
        [/else]
        [frame]
            duration=1
            image={_BIMG}
        [/frame]
    [/defend]
#enddef

#define DIVINE_LIGHTNING DIRECTION_NUMBER
    [if]
        direction=sw,s,se

        [missile_frame]
            begin=-250
            end=150
            halo=halo/divine-lightning-bolt-{DIRECTION_NUMBER}-1.png~FL(vert):100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-2.png~FL(vert):100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-3.png~FL(vert):100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-4.png~FL(vert):100
            halo_y=-125
            offset=1.0
        [/missile_frame]
    [/if]
    [else]
        direction=nw,n,ne

        [missile_frame]
            begin=-250
            end=150
            halo=halo/divine-lightning-bolt-{DIRECTION_NUMBER}-1.png:100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-2.png:100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-3.png:100,halo/divine-lightning-bolt-{DIRECTION_NUMBER}-4.png:100
            halo_y=-125
            offset=1.0
        [/missile_frame]
    [/else]
#enddef

#define NECRO_COLOUR_CHANGE
[modifications]
[object]
                    [effect]
                        apply_to=image_mod
                        # This shifts the Dark Sorcerer and Necromancer hair and
                        # robe colours a bit; first the hair, then the robes
                        replace="PAL(E3DCDC,C9C3BE,999188,6E675C,514A3F>C1C1C1,919191,646464,444444,080808)~PAL(889880,506858,283028>7C999B,4C546C,262C31)"
                    [/effect]
                [/object]
[/modifications]
#enddef

#define WINDSONG_RUNES UNIT ATTACK HALO_BASE HALO_Y
    [attack_anim]
        [filter_attack]
            name={ATTACK}
        [/filter_attack]

        [missile_frame]
            begin=-200
            end=0
            image="misc/empty.png"
        [/missile_frame]
        [frame]
            begin=-300
            end=-250
            image="units/windsong/{UNIT}-magic-1.png"
        [/frame]

        [frame]
            begin=-250
            end=-150
            image="units/windsong/{UNIT}-magic-2.png"
        [/frame]
        [if]
            hits=no
            [frame]
                begin=-150
                end=250
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-miss-1.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-3.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-1.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=magic-missile-1-miss.ogg,magic-missile-2-miss.ogg,magic-missile-3-miss.ogg
            [/frame]
            [frame]
                begin=150
                end=200
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=200
                end=250
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/if]
        [else]
            hits=yes

            [frame]
                begin=-150
                end=0
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-1.png,halo/{HALO_BASE}-2.png,halo/{HALO_BASE}-3.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=magic-missile-1.ogg,magic-missile-2.ogg,magic-missile-3.ogg
            [/frame]

            [frame]
                begin=0
                end=200
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-4.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=200
                end=500
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-5.png,halo/{HALO_BASE}-6.png,halo/{HALO_BASE}-7.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=500
                end=550
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=550
                end=600
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/else]
    [/attack_anim]

#enddef

# A different set for the cipher attack aimed at the Rune Forger
#define WINDSONG_POISON_RUNES UNIT ATTACK HALO_BASE HALO_Y
    [attack_anim]
        [filter_attack]
            name={ATTACK}
        [/filter_attack]

        [missile_frame]
            begin=-200
            end=0
            image="misc/empty.png"
        [/missile_frame]
        [frame]
            begin=-300
            end=-250
            image="units/windsong/{UNIT}-magic-1.png"
        [/frame]

        [frame]
            begin=-250
            end=-150
            image="units/windsong/{UNIT}-magic-2.png"
        [/frame]
        [if]
            hits=no
            [frame]
                begin=-150
                end=250
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-miss-1.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-3.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-1.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=magic-missile-1-miss.ogg,magic-missile-2-miss.ogg,magic-missile-3-miss.ogg
            [/frame]
            [frame]
                begin=150
                end=200
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=200
                end=250
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/if]
        [else]
            hits=yes

            [frame]
                begin=-150
                end=0
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-1.png,halo/{HALO_BASE}-2.png,halo/{HALO_BASE}-3.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=magic-missile-1.ogg,magic-missile-2.ogg,magic-missile-3.ogg
            [/frame]

            [frame]
                begin=0
                end=200
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-4.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=200
                end=500
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-5.png,halo/{HALO_BASE}-6.png,halo/{HALO_BASE}-7.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=500
                end=550
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=550
                end=600
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/else]
        {SOUND:POISON}
    [/attack_anim]

#enddef

#define WINDSONG_DRAINING_RUNES UNIT ATTACK HALO_BASE HALO_Y
    [attack_anim]
        [filter_attack]
            name={ATTACK}
        [/filter_attack]

        [missile_frame]
            begin=-200
            end=0
            image="misc/empty.png"
        [/missile_frame]
        [frame]
            begin=-300
            end=-250
            image="units/windsong/{UNIT}-magic-1.png"
        [/frame]

        [frame]
            begin=-250
            end=-150
            image="units/windsong/{UNIT}-magic-2.png"
        [/frame]
        [if]
            hits=no
            [frame]
                begin=-150
                end=250
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-miss-1.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-3.png,halo/{HALO_BASE}-miss-2.png,halo/{HALO_BASE}-miss-1.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=wail.wav
            [/frame]
            [frame]
                begin=150
                end=200
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=200
                end=250
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/if]
        [else]
            hits=yes

            [frame]
                begin=-150
                end=0
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-1.png,halo/{HALO_BASE}-2.png,halo/{HALO_BASE}-3.png
                halo_x,halo_y=0,-{HALO_Y}
                sound=wail.wav
            [/frame]

            [frame]
                begin=0
                end=200
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-4.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=200
                end=500
                image="units/windsong/{UNIT}-magic-3.png"
                halo=halo/{HALO_BASE}-5.png,halo/{HALO_BASE}-6.png,halo/{HALO_BASE}-7.png
                halo_x,halo_y=0,-{HALO_Y}
            [/frame]
            [frame]
                begin=500
                end=550
                image="units/windsong/{UNIT}-magic-2.png"
            [/frame]
            [frame]
                begin=550
                end=600
                image="units/windsong/{UNIT}-magic-1.png"
            [/frame]
        [/else]
    [/attack_anim]

#enddef